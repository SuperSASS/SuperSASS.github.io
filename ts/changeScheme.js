(()=>{(()=>{let m=document.getElementById("dark-mode-toggle"),a="StackColorScheme",e=localStorage.getItem(a),l=e==="dark",r=window.matchMedia("(prefers-color-scheme: dark)").matches===!0,o=window.matchMedia("(prefers-color-scheme: dark)"),t=!1;(e&&e=="dark"||!e&&r||e==="auto"&&r)&&(t=!0);let s=()=>{document.body.style.transition==""&&document.body.style.setProperty("transition","background-color .3s ease"),t?document.body.dataset.scheme="dark":document.body.dataset.scheme="light"},d=n=>{t=n.matches,s()},c=!1;e||(o.addEventListener("change",d),c=!0),m.addEventListener("click",n=>{t=!t,s(),localStorage.setItem(a,document.body.dataset.scheme),t==(window.matchMedia("(prefers-color-scheme: dark)").matches===!0)?(c||o.addEventListener("change",d),localStorage.setItem(a,"auto")):c&&o.removeEventListener("change",d)})})();})();
